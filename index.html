<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Food Blog Landing Page</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Jacques+Francois:wght@400&display=swap" rel="stylesheet">
  <style>
    :root {
      --spacing-base: 4px;
      --spacing-sm: 12px;
      --spacing-lg: 20px;
    }
    
    body {
      margin: 0;
      font-family: 'Montserrat', Arial, sans-serif;
      background: #faf7f2;
      min-height: 100vh;
      padding: 0;
      box-sizing: border-box;
    }
    
    /* Profile Icon */
    .profile-icon {
      position: absolute;
      top: var(--spacing-base);
      right: var(--spacing-base);
      width: 60px;
      height: 60px;
      cursor: pointer;
      z-index: 999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease;
    }
    
    .profile-icon:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 16px rgba(0,0,0,0.3);
    }
    

    
    .profile-icon-img {
      width: 60px;
      height: 60px;
      object-fit: contain;
    }
    
    /* Profile Modal */
    .profile-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(10px);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
    }
    
    .profile-modal.active {
      display: flex;
    }
    
    .profile-wrapper {
      position: relative;
      display: block;
      width: 100%;
      max-width: 340px;
    }
    
    .profile-avatar {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #fff;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      position: absolute;
      top: -12px;
      left: -12px;
      z-index: 2;
      background: #fff;
    }
    
    .profile-card {
      background: #ffffff;
      padding: 68px 20px 20px 20px;
      max-width: 340px;
      width: 100%;
      height: auto;
      max-height: 80vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      position: relative;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
      text-align: left;
      font-family: 'Montserrat', Arial, sans-serif;
      border: 1px solid rgba(0, 0, 0, 0.04);
      z-index: 1;
      margin-top: 0;
    }
    
    .profile-icon-small {
      width: 35px;
      height: 35px;
      fill: #2c3e50;
    }
    
    .profile-content {
      text-align: left;
      line-height: 1.6;
      color: #4a4a4a;
      font-size: 13px;
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: 400;
      flex: 1 1 auto;
      overflow-y: auto;
      scrollbar-width: none; /* Firefox */
      -ms-overflow-style: none; /* IE 10+ */
      position: relative;
    }
    
    .profile-content::-webkit-scrollbar {
      display: none;
    }
    
    .scroll-hint {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 44px;
      pointer-events: none;
      background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,0.85) 60%, #fff 100%);
      display: flex;
      align-items: flex-end;
      justify-content: center;
      z-index: 10;
      transition: opacity 0.3s;
    }
    
    .scroll-hint-arrow {
      font-size: 26px;
      color: #888;
      margin-bottom: 18px;
      opacity: 0.95;
      font-weight: bold;
      animation: bounceDown 1.2s infinite;
    }
    
    @keyframes bounceDown {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(8px); }
    }
    
    .scroll-hint.hide {
      opacity: 0;
      pointer-events: none;
    }
    
    .profile-content h2 {
      font-size: 18px;
      color: #8B4513;
      margin-bottom: 20px;
      font-family: 'Jacques Francois', serif;
      font-weight: 400;
      text-align: center;
      line-height: 1.2;
    }
    
    .profile-content p {
      margin-bottom: 16px;
      line-height: 1.6;
      color: #4a4a4a;
    }
    
    .profile-content .story-section {
      font-style: italic;
      color: #6b5b47;
      background: #f9f7f4;
      padding: 16px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #d4af37;
      font-size: 12px;
      line-height: 1.5;
    }
    
    .profile-content .closing {
      font-weight: 600;
      color: #333;
      text-align: center;
      margin-top: 20px;
      font-size: 12px;
      border-top: 1px solid #f0f0f0;
      padding-top: 16px;
    }
    
    .profile-content .contact-info {
      font-weight: 500;
      color: #8B4513;
      text-align: center;
      margin-top: 16px;
      font-size: 12px;
      background: #f9f7f4;
      padding: 12px 16px;
      border-radius: 8px;
      border: 1px solid #e6d4a1;
      letter-spacing: 0.5px;
    }
    

    

    
    .gallery-wrapper {
      position: relative;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0;
      box-sizing: border-box;
    }
    
    .container {
      display: grid;
      gap: var(--spacing-base);
      width: 100%;
      
      /* Ensure minimum 3 columns with better responsive design */
      grid-template-columns: repeat(auto-fit, minmax(min(250px, calc(100% / 3 - calc(var(--spacing-base) * 2 / 3))), 1fr));
    }
    
    /* Responsive breakpoints for better control */
    @media (max-width: 480px) {
      .gallery-wrapper {
        padding: 0;
      }
      .container {
        grid-template-columns: repeat(3, 1fr);
        gap: var(--spacing-base);
      }
      body {
        padding: 0;
      }
      .profile-icon {
        width: 50px;
        height: 50px;
        top: var(--spacing-base);
        right: var(--spacing-base);
      }
      .profile-icon-img {
        width: 50px;
        height: 50px;
      }
      .profile-wrapper {
        max-width: 96vw;
      }
      .profile-card {
        padding: 18px 4vw 8px 4vw;
        max-width: 98vw;
        max-height: 70vw;
      }
      .profile-avatar {
        width: 32px;
        height: 32px;
        top: -8px;
        left: -8px;
      }
    }
    
    @media (min-width: 481px) and (max-width: 768px) {
      .container {
        grid-template-columns: repeat(auto-fit, minmax(min(200px, calc(100% / 3 - calc(var(--spacing-base) * 2 / 3))), 1fr));
        gap: var(--spacing-base);
      }
      .profile-icon {
        width: 50px;
        height: 50px;
        top: var(--spacing-base);
        right: var(--spacing-base);
      }
      .profile-icon-img {
        width: 50px;
        height: 50px;
      }
      .profile-wrapper {
        max-width: 95vw;
      }
      .profile-card {
        padding: 32px 12px 16px 12px;
        max-width: 98vw;
      }
      .profile-avatar {
        width: 56px;
        height: 56px;
        top: -10px;
        left: -10px;
      }
      .profile-card {
        max-width: 380px;
        width: 90%;
        height: auto;
        padding: 28px 32px 28px 45px;
      }
      .profile-content {
        font-size: 12px;
      }
      .profile-content h2 {
        font-size: 19px;
        margin-bottom: 18px;
      }
      .profile-content .story-section {
        font-size: 12px;
        padding: 14px;
        margin: 18px 0;
      }
      .profile-content p {
        margin-bottom: 14px;
      }
      .profile-content .closing {
        font-size: 12px;
        margin-top: 18px;
        padding-top: 14px;
      }
      .profile-content .contact-info {
        font-size: 12px;
        margin-top: 14px;
        padding: 11px 15px;
      }
      .profile-icon-small {
        width: 30px;
        height: 30px;
      }
    }
    
    @media (min-width: 769px) and (max-width: 1024px) {
      .container {
        grid-template-columns: repeat(auto-fit, minmax(min(220px, calc(100% / 3 - calc(var(--spacing-base) * 2 / 3))), 1fr));
        gap: var(--spacing-base);
      }
      .profile-icon {
        width: 55px;
        height: 55px;
        top: var(--spacing-base);
        right: var(--spacing-base);
      }
      .profile-icon-img {
        width: 55px;
        height: 55px;
      }
    }
    
    @media (min-width: 1025px) and (max-width: 1440px) {
      .container {
        grid-template-columns: repeat(auto-fit, minmax(min(240px, calc(100% / 3 - calc(var(--spacing-base) * 2 / 3))), 1fr));
        gap: var(--spacing-base);
      }
      .profile-icon {
        width: 60px;
        height: 60px;
        top: var(--spacing-base);
        right: var(--spacing-base);
      }
      .profile-icon-img {
        width: 60px;
        height: 60px;
      }
    }
    
    @media (min-width: 1441px) {
      .container {
        grid-template-columns: repeat(auto-fit, minmax(min(280px, calc(100% / 3 - calc(var(--spacing-base) * 2 / 3))), 1fr));
        gap: var(--spacing-base);
      }
      .profile-icon {
        width: 60px;
        height: 60px;
        top: var(--spacing-base);
        right: var(--spacing-base);
      }
      .profile-icon-img {
        width: 60px;
        height: 60px;
      }
    }
    
    .img-card {
      position: relative;
      width: 100%;
      aspect-ratio: 1/1;
      cursor: pointer;
      perspective: 1000px;
      /* Ensure no overflow */
      overflow: visible;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .img-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }
    .img-inner {
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
      position: relative;
    }
    .img-card.flipped .img-inner {
      transform: rotateY(180deg);
    }
    .img-front, .img-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      /* Prevent content from being cut off */
      box-sizing: border-box;
      transition: box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .img-front img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
      opacity: 0;
    }
    
    .img-front img.loaded {
      opacity: 1;
    }
    
    .img-card:hover .img-front img {
      transform: scale(1.05);
    }
    .img-back {
      background: #fffbe6;
      color: #b85c38;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1em;
      padding: var(--spacing-base);
      transform: rotateY(180deg);
      text-align: center;
      box-sizing: border-box;
      /* Ensure text doesn't overflow */
      word-wrap: break-word;
      overflow-wrap: break-word;
      transition: background-color 0.3s ease, color 0.3s ease;
      font-weight: 500;
      line-height: 1.4;
      letter-spacing: 0.025em;
    }
    
    /* Loading state */
    .img-loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 40px;
      height: 40px;
      border: 3px solid #f3f3f3;
      border-top: 3px solid #b85c38;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      z-index: 1;
    }
    
    @keyframes spin {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    
    /* Modal overlay */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(40, 40, 40, 0.6);
      backdrop-filter: blur(8px);
      align-items: center;
      justify-content: center;
      transition: background 0.3s cubic-bezier(0.4, 0, 0.2, 1), backdrop-filter 0.3s ease;
      padding: var(--spacing-base);
      box-sizing: border-box;
    }
    .modal.active {
      display: flex;
    }
    .modal-content {
      background: none;
      border: none;
      box-shadow: none;
      outline: none;
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 250px;
      min-height: 250px;
      max-width: calc(100vw - calc(var(--spacing-base) * 2));
      max-height: calc(100vh - calc(var(--spacing-base) * 2));
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      transform: scale(0.9);
    }
    
    .modal.active .modal-content {
      transform: scale(1);
    }
    
    .modal .img-card {
      width: min(450px, 85vw);
      max-width: 85vw;
      aspect-ratio: 1/1;
      margin: 0;
      z-index: 1001;
      cursor: pointer;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }
    
    .modal-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }
    
    .know-more-btn {
      background: white;
      color: black;
      border: none;
      padding: 8px 16px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 400;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      font-family: 'Montserrat', Arial, sans-serif;
      letter-spacing: 0.25px;
    }
    
    .know-more-btn:hover {
      background: #f5f5f5;
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }
    
    .know-more-btn:active {
      transform: translateY(0);
    }
    
    .know-more-btn.hidden {
      opacity: 0;
      pointer-events: none;
    }
    
    /* Responsive modal */
    @media (max-width: 480px) {
      .modal .img-card {
        width: min(320px, 90vw);
        max-width: 90vw;
      }
      .modal {
        padding: var(--spacing-base);
      }
      .modal-content {
        max-width: calc(100vw - calc(var(--spacing-base) * 2));
        max-height: calc(100vh - calc(var(--spacing-base) * 2));
      }
      .know-more-btn {
        padding: 6px 12px;
        font-size: 11px;
      }
      .modal-wrapper {
        gap: 12px;
      }
    }
    @media (max-width: 768px) {
      .profile-wrapper {
        max-width: 95vw;
      }
      .profile-card {
        padding: 60px 10px 16px 10px;
        max-width: 95vw;
      }
      .profile-avatar {
        width: 48px;
        height: 48px;
        top: -10px;
        left: -10px;
        border-width: 2px;
      }
      .profile-content h2 {
        font-size: 16px;
      }
      .profile-content {
        font-size: 12px;
      }
    }
    @media (max-width: 480px) {
      .profile-wrapper {
        max-width: 85vw;
        margin-left: auto;
        margin-right: auto;
      }
      .profile-card {
        padding: 48px 2vw 8px 2vw;
        max-width: 85vw;
        max-height: 80vh;
        margin-left: -8px;
        margin-right: auto;
      }
      .profile-avatar {
        width: 36px;
        height: 36px;
        top: -8px;
        left: -16px;
        border-width: 2px;
      }
      .profile-content h2 {
        font-size: 13px;
      }
      .profile-content {
        font-size: 10px;
      }
    }
    @media (max-width: 768px) and (min-width: 481px) {
      .profile-card {
        margin-left: 10px;
        margin-right: auto;
      }
      .profile-avatar {
        left: -10px;
      }
    }
    @media (min-width: 769px) {
      .profile-card {
        margin-left: 12px;
        margin-right: auto;
      }
      .profile-avatar {
        left: -12px;
      }
    }
    .profile-modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      font-size: 2rem;
      color: #888;
      cursor: pointer;
      z-index: 10;
      transition: color 0.2s;
    }
    .profile-modal-close:hover {
      color: #c00;
    }
  </style>
</head>
<body>
  <!-- Profile Modal -->
  <div class="profile-modal" id="profileModal">
    <div class="profile-wrapper">
      <img src="./assets/logo/logo.png" alt="Profile" class="profile-avatar">
      <div class="profile-card">
        <button class="profile-modal-close" id="profileModalClose" aria-label="Close profile modal">&times;</button>
        <div class="profile-content">
          <h2>Helloooooo!!</h2>
          <p>I'm a food stylist, table scape artist, art director, and hand model – all rolled into one.</p>
          <p>I'm so excited to share my work with the world. I'd love to know your thoughts and feedback, because that's how we grow and evolve.</p>
          <div class="story-section">
            A little story about me – I grew up watching Masterchef Australia and that's where I first fell in love with food plating and quenelles. Who knew it would get me here?
          </div>
          <p>I've had the privilege to work with an amazing company Lost and Hungry Studios and esteemed clients like Chrome Hospitality, Borosil, Tata, Oberoi, Entisi, Foodhall, Bastian, Armani Cafe, Amadeo, Nmacc, Yauatcha, Hakkasan, Masala Library and many more.</p>
          <p>The person I've evolved to be as a creative – I owe it to all of the people above and more.</p>
          <p>There's always more to come, see and be,</p>
          <div class="closing">Till then, eat with your eyes and enjoy!</div>
          <div class="contact-info">Contact me: 9769549605</div>
        </div>
        <div class="scroll-hint" id="profileScrollHint">
          <span class="scroll-hint-arrow">&#8595;</span>
        </div>
      </div>
    </div>
  </div>

  <div class="gallery-wrapper">
    <!-- Profile Icon -->
    <div class="profile-icon" id="profileIcon">
      <img src="./assets/logo/logo.png" alt="Profile" class="profile-icon-img">
    </div>
    
    <div class="container" id="gallery">
      <!-- Image cards will be injected here -->
    </div>
  </div>
  <div class="modal" id="modal">
    <div class="modal-content" id="modalContent">
      <!-- Zoomed image card will be cloned here -->
    </div>
  </div>
  <script type="module">
    import { images } from './images.js';

    const gallery = document.getElementById('gallery');
    const modal = document.getElementById('modal');
    const modalContent = document.getElementById('modalContent');
    const profileIcon = document.getElementById('profileIcon');
    const profileModal = document.getElementById('profileModal');
    const profileModalClose = document.getElementById('profileModalClose');

    // Function to get dominant color from image
    function getDominantColor(img) {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      
      canvas.width = img.naturalWidth || img.width;
      canvas.height = img.naturalHeight || img.height;
      
      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
      
      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      const data = imageData.data;
      
      const colorCount = {};
      
      // Sample every 10th pixel for performance
      for (let i = 0; i < data.length; i += 40) {
        const r = data[i];
        const g = data[i + 1];
        const b = data[i + 2];
        const alpha = data[i + 3];
        
        // Skip transparent pixels
        if (alpha < 125) continue;
        
        // Round colors to reduce variations
        const roundedR = Math.round(r / 10) * 10;
        const roundedG = Math.round(g / 10) * 10;
        const roundedB = Math.round(b / 10) * 10;
        
        const colorKey = `${roundedR},${roundedG},${roundedB}`;
        colorCount[colorKey] = (colorCount[colorKey] || 0) + 1;
      }
      
      // Find the most frequent color
      let maxCount = 0;
      let dominantColor = '200,200,200'; // fallback
      
      for (const color in colorCount) {
        if (colorCount[color] > maxCount) {
          maxCount = colorCount[color];
          dominantColor = color;
        }
      }
      
      return dominantColor;
    }

    // Function to create lighter version of color
    function lightenColor(rgbString, amount = 0.7) {
      const [r, g, b] = rgbString.split(',').map(Number);
      
      const lighterR = Math.min(255, r + (255 - r) * amount);
      const lighterG = Math.min(255, g + (255 - g) * amount);
      const lighterB = Math.min(255, b + (255 - b) * amount);
      
      return `rgb(${Math.round(lighterR)}, ${Math.round(lighterG)}, ${Math.round(lighterB)})`;
    }

    // Profile modal functionality
    profileIcon.addEventListener('click', () => {
      profileModal.classList.add('active');
      // Show/hide scroll hint
      setTimeout(() => updateProfileScrollHint(), 100);
    });

    profileModal.addEventListener('click', (e) => {
      if (e.target === profileModal) {
        profileModal.classList.remove('active');
      }
    });

    profileModalClose.addEventListener('click', (e) => {
      e.stopPropagation();
      profileModal.classList.remove('active');
    });

    // Scroll hint logic
    function updateProfileScrollHint() {
      const content = document.querySelector('.profile-content');
      const hint = document.getElementById('profileScrollHint');
      if (!content || !hint) return;
      if (content.scrollHeight > content.clientHeight + 2) {
        hint.classList.remove('hide');
      } else {
        hint.classList.add('hide');
      }
    }
    // Hide scroll hint when scrolled to bottom
    document.querySelector('.profile-content').addEventListener('scroll', function() {
      const hint = document.getElementById('profileScrollHint');
      if (this.scrollTop + this.clientHeight >= this.scrollHeight - 2) {
        hint.classList.add('hide');
      } else {
        hint.classList.remove('hide');
      }
    });

    // Render image cards
    images.forEach((img, idx) => {
      const card = document.createElement('div');
      card.className = 'img-card';
      card.innerHTML = `
        <div class="img-inner">
          <div class="img-front">
            <div class="img-loading"></div>
            <img src="${img.image_url}" alt="Food image ${idx+1}">
          </div>
          <div class="img-back">${img.image_content}</div>
        </div>
      `;
      
      // Handle image loading
      const imgElement = card.querySelector('.img-front img');
      const loadingElement = card.querySelector('.img-loading');
      
      imgElement.addEventListener('load', () => {
        imgElement.classList.add('loaded');
        loadingElement.style.display = 'none';
      });
      
      imgElement.addEventListener('error', () => {
        loadingElement.style.display = 'none';
        imgElement.style.opacity = '0.5';
      });
      
      card.addEventListener('click', (e) => {
        e.stopPropagation();
        openModal(idx);
      });
      gallery.appendChild(card);
    });

    function openModal(idx) {
      // Clone the card for modal
      modalContent.innerHTML = '';

      // Create wrapper for card and button
      const wrapper = document.createElement('div');
      wrapper.className = 'modal-wrapper';

      const card = document.createElement('div');
      card.className = 'img-card';
      card.innerHTML = `
        <div class="img-inner">
          <div class="img-front">
            <div class="img-loading"></div>
            <img src="${images[idx].image_url}" alt="Food image ${idx+1}">
          </div>
          <div class="img-back">${images[idx].image_content}</div>
        </div>
      `;

      const img = card.querySelector('.img-front img');
      const backDiv = card.querySelector('.img-back');
      const loadingElement = card.querySelector('.img-loading');

      // Handle image loading in modal
      img.addEventListener('load', () => {
        img.classList.add('loaded');
        loadingElement.style.display = 'none';
      });

      img.addEventListener('error', () => {
        loadingElement.style.display = 'none';
        img.style.opacity = '0.5';
      });

      // Create know more button for all images
      const knowMoreBtn = document.createElement('button');
      knowMoreBtn.className = 'know-more-btn';
      knowMoreBtn.textContent = 'know more';

      // Function to handle flip
      const handleFlip = (e) => {
        e.stopPropagation();
        card.classList.toggle('flipped');

        // If flipping to back, extract dominant color and apply lighter version
        if (card.classList.contains('flipped')) {
          // Hide the know more button when flipped
          knowMoreBtn.classList.add('hidden');

          if (img.complete) {
            try {
              const dominantColor = getDominantColor(img);
              const lighterColor = lightenColor(dominantColor);
              backDiv.style.backgroundColor = lighterColor;
            } catch (error) {
              console.log('Could not extract color:', error);
            }
          } else {
            img.onload = () => {
              try {
                const dominantColor = getDominantColor(img);
                const lighterColor = lightenColor(dominantColor);
                backDiv.style.backgroundColor = lighterColor;
              } catch (error) {
                console.log('Could not extract color:', error);
              }
            };
          }
        } else {
          // Show the know more button when flipping back
          knowMoreBtn.classList.remove('hidden');
          // Reset to original background when flipping back
          backDiv.style.backgroundColor = '#fffbe6';
        }
      };

      // Add flip functionality to both card and button
      card.addEventListener('click', handleFlip);
      knowMoreBtn.addEventListener('click', handleFlip);

      wrapper.appendChild(card);
      wrapper.appendChild(knowMoreBtn);

      modalContent.appendChild(wrapper);
      modal.classList.add('active');
    }

    // Close modal on background click
    modal.addEventListener('click', () => {
      modal.classList.remove('active');
      // Remove flip state and reset button visibility
      const card = modalContent.querySelector('.img-card');
      const btn = modalContent.querySelector('.know-more-btn');
      if (card) card.classList.remove('flipped');
      if (btn) btn.classList.remove('hidden');
    });
    // Prevent modal content click from closing
    modalContent.addEventListener('click', (e) => {
      e.stopPropagation();
    });
  </script>
</body>
</html> 